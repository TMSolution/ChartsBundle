<div class="mini-charts-item {{options.backgroundColorClass}}">
    <div class="clearfix">
        <div id="{{options.htmlContainerId}}" class="chart spark-chart-block"></div>
        <div class="count">
            <small>{{options.title|trans}}</small>
            <h2>{{options.value}}</h2>
        </div>
    </div>
</div>

<script>

    var {{options.htmlContainerId}}Fn = function(){
        if ($('#{{options.htmlContainerId}}')[0]) {
            
            $('#{{options.htmlContainerId}}').sparkline({{options.data|raw}}, {
               type: 'line',
               width: 85,
               height: 45,
               lineColor: '{{options.lineColor}}',
               fillColor: '{{options.fillColor}}',
               lineWidth: {{options.lineWidth}},
               maxSpotColor: '{{options.maxSpotColor}}',
               minSpotColor: '{{options.minSpotColor}}',
               spotColor: '{{options.spotColor}}',
               spotRadius: {{options.spotRadius}},
               highlightSpotColor: '{{options.highlightSpotColor}}',
               highlightLineColor: '{{options.highlightLineColor}}',
             });

        }
    }    
    {% if app.request.isXmlHttpRequest() %}
        {{options.htmlContainerId}}Fn();
    {% else %}
    if (collector) {
        collector.addFunction({{options.htmlContainerId}}Fn);
    }
    {% endif %}
</script>